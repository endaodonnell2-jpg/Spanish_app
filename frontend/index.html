<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Walkie-Talkie UI</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background-color: #f3f0eb; /* light beige background */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100vh;
    overflow: hidden;
  }

  /* Sound bar */
  #sound-bar {
    height: 20px;
    width: 100%;
    background-color: grey;
    border-radius: 10px;
    margin: 10px 0;
    transition: background-color 0.1s;
  }

  /* Container for last two sentences */
  #text-box {
    flex: 1;
    padding: 10px;
    overflow-y: hidden;
    display: flex;
    flex-direction: column-reverse;
  }

  .sentence {
    margin: 5px 0;
    word-break: break-word;
  }

  .user-text { color: #b22222; font-weight: bold; } /* red for user */
  .ai-text { color: #2e8b57; font-weight: bold; } /* green for AI */

  /* Hold button container */
  #hold-container {
    display: flex;
    justify-content: center;
    padding: 15px 0;
  }

  #hold-button {
    width: 80%;
    max-width: 300px;
    height: 60px;
    font-size: 24px;
    border-radius: 30px;
    border: none;
    background-color: #4caf50; /* green default */
    color: white;
    cursor: pointer;
    transition: background-color 0.1s;
  }

  #hold-button:active {
    background-color: #b22222; /* red when pressed */
  }
</style>
</head>
<body>

<!-- Sound bar -->
<div id="sound-bar"></div>

<!-- Last two sentences -->
<div id="text-box">
  <div class="sentence user-text" id="user-sentence">User: </div>
  <div class="sentence ai-text" id="ai-sentence">AI: </div>
</div>

<!-- Hold button -->
<div id="hold-container">
  <button id="hold-button">HOLD</button>
</div>

<script>
  const soundBar = document.getElementById('sound-bar');
  const holdButton = document.getElementById('hold-button');
  let userSpeaking = false;
  let aiSpeaking = false;

  // Dummy simulation for AI speaking and user speaking
  function simulateSound(bar, isUser) {
    if (!isUser && !aiSpeaking) return; // AI not speaking
    if (isUser && !userSpeaking) return; // User not speaking

    const intensity = Math.random() * 40 + 10; // wobble effect
    bar.style.width = 100 - intensity + '%';
    setTimeout(() => { bar.style.width = '100%'; }, 50);
  }

  // Update sound bar based on who is speaking
  setInterval(() => {
    if (userSpeaking) {
      soundBar.style.backgroundColor = '#b22222'; // red
      simulateSound(soundBar, true);
    } else if (aiSpeaking) {
      soundBar.style.backgroundColor = '#2e8b57'; // green
      simulateSound(soundBar, false);
    } else {
      soundBar.style.backgroundColor = 'grey'; // idle
      soundBar.style.width = '100%';
    }
  }, 100);

  // Hold button logic
  holdButton.addEventListener('mousedown', () => {
    userSpeaking = true;
  });
  holdButton.addEventListener('mouseup', () => {
    userSpeaking = false;
  });
  holdButton.addEventListener('touchstart', () => {
    userSpeaking = true;
  });
  holdButton.addEventListener('touchend', () => {
    userSpeaking = false;
  });

  // Function to update text box
  function updateText(userText, aiText) {
    document.getElementById('user-sentence').textContent = 'User: ' + userText;
    document.getElementById('ai-sentence').textContent = 'AI: ' + aiText;
  }

  // Example: Update every 5s for demo
  setInterval(() => {
    if (!userSpeaking && !aiSpeaking) return;
    updateText('Hello there!', 'Hi! How can I help?');
    aiSpeaking = !aiSpeaking; // simulate alternating
  }, 5000);
</script>

</body>
</html>

